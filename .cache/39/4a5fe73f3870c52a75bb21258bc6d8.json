{"id":"Gjdl","dependencies":[{"name":"C:\\Users\\Shweyin\\Desktop\\The-Traveler\\package.json","includedInParent":true,"mtime":1583375518270},{"name":"C:\\Users\\Shweyin\\Desktop\\The-Traveler\\node_modules\\@feathersjs\\feathers\\package.json","includedInParent":true,"mtime":1582580512510},{"name":"events","loc":{"line":1,"column":33},"parent":"C:\\Users\\Shweyin\\Desktop\\The-Traveler\\node_modules\\@feathersjs\\feathers\\lib\\events.js","resolved":"C:\\Users\\Shweyin\\Desktop\\The-Traveler\\node_modules\\events\\events.js"},{"name":"uberproto","loc":{"line":2,"column":22},"parent":"C:\\Users\\Shweyin\\Desktop\\The-Traveler\\node_modules\\@feathersjs\\feathers\\lib\\events.js","resolved":"C:\\Users\\Shweyin\\Desktop\\The-Traveler\\node_modules\\uberproto\\lib\\proto.js"}],"generated":{"js":"const{EventEmitter:e}=require(\"events\"),t=require(\"uberproto\"),n=exports.eventHook=function(){return function(e){const{app:t,service:n}=e,o=null===e.event?e.event:t.eventMappings[e.method],i=n._hookEvents&&-1!==n._hookEvents.indexOf(o);if(o&&i&&\"error\"!==e.type){(Array.isArray(e.result)?e.result:[e.result]).forEach(t=>n.emit(o,t,e))}}},o=exports.eventMixin=function(t){if(t._serviceEvents)return;const n=this,o=\"function\"==typeof t.on&&\"function\"==typeof t.emit;\"function\"!=typeof t.mixin||o||t.mixin(e.prototype),Object.defineProperties(t,{_serviceEvents:{value:Array.isArray(t.events)?t.events.slice():[]},_hookEvents:{value:[]}}),Object.keys(n.eventMappings).forEach(e=>{const o=n.eventMappings[e],i=-1!==t._serviceEvents.indexOf(o);\"function\"!=typeof t[e]||i||(t._serviceEvents.push(o),t._hookEvents.push(o))})};module.exports=function(){return function(i){Object.assign(i,{eventMappings:{create:\"created\",update:\"updated\",remove:\"removed\",patch:\"patched\"}}),i.hooks({finally:n()}),t.mixin(e.prototype,i),i.mixins.push(o)}};"},"sourceMaps":{"js":{"mappings":[{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"EventEmitter","original":{"line":1,"column":8},"generated":{"line":1,"column":19}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"require","original":{"line":1,"column":25},"generated":{"line":1,"column":22}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":1,"column":33},"generated":{"line":1,"column":30}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"Proto","original":{"line":2,"column":6},"generated":{"line":1,"column":40}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"require","original":{"line":2,"column":14},"generated":{"line":1,"column":42}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":2,"column":22},"generated":{"line":1,"column":50}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventHook","original":{"line":6,"column":6},"generated":{"line":1,"column":63}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"exports","original":{"line":6,"column":18},"generated":{"line":1,"column":65}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventHook","original":{"line":6,"column":26},"generated":{"line":1,"column":73}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":6,"column":38},"generated":{"line":1,"column":83}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":7,"column":9},"generated":{"line":1,"column":94}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":7,"column":9},"generated":{"line":1,"column":101}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":7,"column":19},"generated":{"line":1,"column":110}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":8,"column":10},"generated":{"line":1,"column":113}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":8,"column":10},"generated":{"line":1,"column":119}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":8,"column":12},"generated":{"line":1,"column":123}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":8,"column":10},"generated":{"line":1,"column":125}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":8,"column":17},"generated":{"line":1,"column":133}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":8,"column":29},"generated":{"line":1,"column":136}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventName","original":{"line":9,"column":10},"generated":{"line":1,"column":138}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":9,"column":37},"generated":{"line":1,"column":140}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":9,"column":22},"generated":{"line":1,"column":147}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"event","original":{"line":9,"column":27},"generated":{"line":1,"column":149}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":9,"column":44},"generated":{"line":1,"column":155}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"event","original":{"line":9,"column":49},"generated":{"line":1,"column":157}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":9,"column":57},"generated":{"line":1,"column":163}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventMappings","original":{"line":9,"column":61},"generated":{"line":1,"column":165}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":9,"column":75},"generated":{"line":1,"column":179}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"method","original":{"line":9,"column":80},"generated":{"line":1,"column":181}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"isHookEvent","original":{"line":10,"column":10},"generated":{"line":1,"column":189}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":10,"column":24},"generated":{"line":1,"column":191}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"_hookEvents","original":{"line":10,"column":32},"generated":{"line":1,"column":193}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":10,"column":91},"generated":{"line":1,"column":207}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":10,"column":47},"generated":{"line":1,"column":211}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"_hookEvents","original":{"line":10,"column":55},"generated":{"line":1,"column":213}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"indexOf","original":{"line":10,"column":67},"generated":{"line":1,"column":225}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventName","original":{"line":10,"column":75},"generated":{"line":1,"column":233}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventName","original":{"line":13,"column":8},"generated":{"line":1,"column":236}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventName","original":{"line":13,"column":8},"generated":{"line":1,"column":239}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"isHookEvent","original":{"line":13,"column":21},"generated":{"line":1,"column":242}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":13,"column":50},"generated":{"line":1,"column":245}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":13,"column":36},"generated":{"line":1,"column":255}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"type","original":{"line":13,"column":41},"generated":{"line":1,"column":257}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":13,"column":59},"generated":{"line":1,"column":262}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"Array","original":{"line":14,"column":22},"generated":{"line":1,"column":264}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"isArray","original":{"line":14,"column":28},"generated":{"line":1,"column":270}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":14,"column":36},"generated":{"line":1,"column":278}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"result","original":{"line":14,"column":41},"generated":{"line":1,"column":280}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":14,"column":51},"generated":{"line":1,"column":288}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"result","original":{"line":14,"column":56},"generated":{"line":1,"column":290}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":14,"column":65},"generated":{"line":1,"column":297}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":14,"column":67},"generated":{"line":1,"column":298}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"result","original":{"line":14,"column":72},"generated":{"line":1,"column":300}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"forEach","original":{"line":16,"column":14},"generated":{"line":1,"column":309}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"element","original":{"line":16,"column":22},"generated":{"line":1,"column":317}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":16,"column":33},"generated":{"line":1,"column":320}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"emit","original":{"line":16,"column":41},"generated":{"line":1,"column":322}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventName","original":{"line":16,"column":46},"generated":{"line":1,"column":327}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"element","original":{"line":16,"column":57},"generated":{"line":1,"column":329}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hook","original":{"line":16,"column":66},"generated":{"line":1,"column":331}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventMixin","original":{"line":22,"column":6},"generated":{"line":1,"column":338}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"exports","original":{"line":22,"column":19},"generated":{"line":1,"column":340}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventMixin","original":{"line":22,"column":27},"generated":{"line":1,"column":348}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":22,"column":40},"generated":{"line":1,"column":359}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":22,"column":61},"generated":{"line":1,"column":368}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":23,"column":6},"generated":{"line":1,"column":371}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":23,"column":6},"generated":{"line":1,"column":374}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"_serviceEvents","original":{"line":23,"column":14},"generated":{"line":1,"column":376}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":24,"column":4},"generated":{"line":1,"column":391}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":27,"column":8},"generated":{"line":1,"column":398}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":27,"column":8},"generated":{"line":1,"column":404}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":27,"column":14},"generated":{"line":1,"column":406}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"isEmitter","original":{"line":29,"column":8},"generated":{"line":1,"column":411}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":29,"column":42},"generated":{"line":1,"column":413}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":29,"column":27},"generated":{"line":1,"column":432}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"on","original":{"line":29,"column":35},"generated":{"line":1,"column":434}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":30,"column":28},"generated":{"line":1,"column":438}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":30,"column":11},"generated":{"line":1,"column":457}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"emit","original":{"line":30,"column":19},"generated":{"line":1,"column":459}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":33,"column":31},"generated":{"line":1,"column":464}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":33,"column":13},"generated":{"line":1,"column":483}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"mixin","original":{"line":33,"column":21},"generated":{"line":1,"column":485}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"isEmitter","original":{"line":33,"column":46},"generated":{"line":1,"column":492}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":34,"column":4},"generated":{"line":1,"column":495}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"mixin","original":{"line":34,"column":12},"generated":{"line":1,"column":497}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"EventEmitter","original":{"line":34,"column":18},"generated":{"line":1,"column":503}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"prototype","original":{"line":34,"column":31},"generated":{"line":1,"column":505}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"Object","original":{"line":38,"column":2},"generated":{"line":1,"column":516}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"defineProperties","original":{"line":38,"column":9},"generated":{"line":1,"column":523}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":38,"column":26},"generated":{"line":1,"column":540}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":38,"column":35},"generated":{"line":1,"column":542}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"_serviceEvents","original":{"line":40,"column":4},"generated":{"line":1,"column":543}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":40,"column":20},"generated":{"line":1,"column":558}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"value","original":{"line":41,"column":6},"generated":{"line":1,"column":559}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"Array","original":{"line":41,"column":13},"generated":{"line":1,"column":565}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"isArray","original":{"line":41,"column":19},"generated":{"line":1,"column":571}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":41,"column":27},"generated":{"line":1,"column":579}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"events","original":{"line":41,"column":35},"generated":{"line":1,"column":581}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":41,"column":45},"generated":{"line":1,"column":589}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"events","original":{"line":41,"column":53},"generated":{"line":1,"column":591}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"slice","original":{"line":41,"column":60},"generated":{"line":1,"column":598}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":41,"column":70},"generated":{"line":1,"column":606}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"_hookEvents","original":{"line":45,"column":4},"generated":{"line":1,"column":610}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":45,"column":17},"generated":{"line":1,"column":622}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"value","original":{"line":46,"column":6},"generated":{"line":1,"column":623}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":46,"column":13},"generated":{"line":1,"column":629}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"Object","original":{"line":51,"column":2},"generated":{"line":1,"column":635}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"keys","original":{"line":51,"column":9},"generated":{"line":1,"column":642}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":51,"column":14},"generated":{"line":1,"column":647}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventMappings","original":{"line":51,"column":18},"generated":{"line":1,"column":649}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"forEach","original":{"line":51,"column":33},"generated":{"line":1,"column":664}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"method","original":{"line":51,"column":41},"generated":{"line":1,"column":672}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"event","original":{"line":52,"column":10},"generated":{"line":1,"column":676}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"event","original":{"line":52,"column":10},"generated":{"line":1,"column":682}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":52,"column":18},"generated":{"line":1,"column":684}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventMappings","original":{"line":52,"column":22},"generated":{"line":1,"column":686}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"method","original":{"line":52,"column":36},"generated":{"line":1,"column":700}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"alreadyEmits","original":{"line":53,"column":10},"generated":{"line":1,"column":703}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":53,"column":68},"generated":{"line":1,"column":706}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":53,"column":25},"generated":{"line":1,"column":710}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"_serviceEvents","original":{"line":53,"column":33},"generated":{"line":1,"column":712}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"indexOf","original":{"line":53,"column":48},"generated":{"line":1,"column":727}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"event","original":{"line":53,"column":56},"generated":{"line":1,"column":735}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":57,"column":35},"generated":{"line":1,"column":738}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":57,"column":15},"generated":{"line":1,"column":757}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"method","original":{"line":57,"column":23},"generated":{"line":1,"column":759}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"alreadyEmits","original":{"line":57,"column":50},"generated":{"line":1,"column":763}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":58,"column":6},"generated":{"line":1,"column":767}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"_serviceEvents","original":{"line":58,"column":14},"generated":{"line":1,"column":769}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"push","original":{"line":58,"column":29},"generated":{"line":1,"column":784}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"event","original":{"line":58,"column":34},"generated":{"line":1,"column":789}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"service","original":{"line":59,"column":6},"generated":{"line":1,"column":792}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"_hookEvents","original":{"line":59,"column":14},"generated":{"line":1,"column":794}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"push","original":{"line":59,"column":26},"generated":{"line":1,"column":806}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"event","original":{"line":59,"column":31},"generated":{"line":1,"column":811}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"module","original":{"line":64,"column":0},"generated":{"line":1,"column":818}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"exports","original":{"line":64,"column":7},"generated":{"line":1,"column":825}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":64,"column":17},"generated":{"line":1,"column":833}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":65,"column":9},"generated":{"line":1,"column":844}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":65,"column":9},"generated":{"line":1,"column":851}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":65,"column":19},"generated":{"line":1,"column":860}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"Object","original":{"line":67,"column":4},"generated":{"line":1,"column":863}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"assign","original":{"line":67,"column":11},"generated":{"line":1,"column":870}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":67,"column":18},"generated":{"line":1,"column":877}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":67,"column":23},"generated":{"line":1,"column":879}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventMappings","original":{"line":68,"column":6},"generated":{"line":1,"column":880}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":68,"column":21},"generated":{"line":1,"column":894}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"create","original":{"line":69,"column":8},"generated":{"line":1,"column":895}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":69,"column":16},"generated":{"line":1,"column":902}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"update","original":{"line":70,"column":8},"generated":{"line":1,"column":912}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":70,"column":16},"generated":{"line":1,"column":919}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"remove","original":{"line":71,"column":8},"generated":{"line":1,"column":929}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":71,"column":16},"generated":{"line":1,"column":936}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"patch","original":{"line":72,"column":8},"generated":{"line":1,"column":946}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":72,"column":15},"generated":{"line":1,"column":952}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":78,"column":4},"generated":{"line":1,"column":965}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"hooks","original":{"line":78,"column":8},"generated":{"line":1,"column":967}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","original":{"line":78,"column":14},"generated":{"line":1,"column":973}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"finally","original":{"line":78,"column":16},"generated":{"line":1,"column":974}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventHook","original":{"line":78,"column":25},"generated":{"line":1,"column":982}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"Proto","original":{"line":81,"column":4},"generated":{"line":1,"column":988}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"mixin","original":{"line":81,"column":10},"generated":{"line":1,"column":990}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"EventEmitter","original":{"line":81,"column":16},"generated":{"line":1,"column":996}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"prototype","original":{"line":81,"column":29},"generated":{"line":1,"column":998}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":81,"column":40},"generated":{"line":1,"column":1008}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"app","original":{"line":83,"column":4},"generated":{"line":1,"column":1011}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"mixins","original":{"line":83,"column":8},"generated":{"line":1,"column":1013}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"push","original":{"line":83,"column":15},"generated":{"line":1,"column":1020}},{"source":"../../node_modules/@feathersjs/feathers/lib/events.js","name":"eventMixin","original":{"line":83,"column":20},"generated":{"line":1,"column":1025}}],"sources":{"../../node_modules/@feathersjs/feathers/lib/events.js":"const { EventEmitter } = require('events');\nconst Proto = require('uberproto');\n\n// Returns a hook that emits service events. Should always be\n// used as the very last hook in the chain\nconst eventHook = exports.eventHook = function eventHook () {\n  return function (hook) {\n    const { app, service } = hook;\n    const eventName = hook.event === null ? hook.event : app.eventMappings[hook.method];\n    const isHookEvent = service._hookEvents && service._hookEvents.indexOf(eventName) !== -1;\n\n    // If this event is not being sent yet and we are not in an error hook\n    if (eventName && isHookEvent && hook.type !== 'error') {\n      const results = Array.isArray(hook.result) ? hook.result : [ hook.result ];\n\n      results.forEach(element => service.emit(eventName, element, hook));\n    }\n  };\n};\n\n// Mixin that turns a service into a Node event emitter\nconst eventMixin = exports.eventMixin = function eventMixin (service) {\n  if (service._serviceEvents) {\n    return;\n  }\n\n  const app = this;\n  // Indicates if the service is already an event emitter\n  const isEmitter = typeof service.on === 'function' &&\n    typeof service.emit === 'function';\n\n  // If not, mix it in (the service is always an Uberproto object that has a .mixin)\n  if (typeof service.mixin === 'function' && !isEmitter) {\n    service.mixin(EventEmitter.prototype);\n  }\n\n  // Define non-enumerable properties of\n  Object.defineProperties(service, {\n    // A list of all events that this service sends\n    _serviceEvents: {\n      value: Array.isArray(service.events) ? service.events.slice() : []\n    },\n\n    // A list of events that should be handled through the event hooks\n    _hookEvents: {\n      value: []\n    }\n  });\n\n  // `app.eventMappings` has the mapping from method name to event name\n  Object.keys(app.eventMappings).forEach(method => {\n    const event = app.eventMappings[method];\n    const alreadyEmits = service._serviceEvents.indexOf(event) !== -1;\n\n    // Add events for known methods to _serviceEvents and _hookEvents\n    // if the service indicated it does not send it itself yet\n    if (typeof service[method] === 'function' && !alreadyEmits) {\n      service._serviceEvents.push(event);\n      service._hookEvents.push(event);\n    }\n  });\n};\n\nmodule.exports = function () {\n  return function (app) {\n    // Mappings from service method to event name\n    Object.assign(app, {\n      eventMappings: {\n        create: 'created',\n        update: 'updated',\n        remove: 'removed',\n        patch: 'patched'\n      }\n    });\n\n    // Register the event hook\n    // `finally` hooks always run last after `error` and `after` hooks\n    app.hooks({ finally: eventHook() });\n\n    // Make the app an event emitter\n    Proto.mixin(EventEmitter.prototype, app);\n\n    app.mixins.push(eventMixin);\n  };\n};\n"},"lineCount":null}},"error":null,"hash":"15fb78525a897609a7bb195f3cc5945e","cacheData":{"env":{}}}